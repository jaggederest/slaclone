<!DOCTYPE html>
<html>
<head>
</head>
<body>
<section id="channels">
  <input type="text" id="create_channel_field"><button onClick="channel_create($('#create_channel_field').val())">create channel</button>
</section>
<section id="chatarea">
  <input type="text" id="chatfield"><button onClick="hookly.notify('#updates', { id: 1538, name: $('#chatfield').val() })">send</button>
</section>

<script src="https://rawgit.com/bnorton/hookly.js/master/hookly.js"></script>
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script>
function channel_callback(name) {
  return function callback(data) {
    document.getElementById('channel'+name).innerHTML += data.name
  }
}

function channel_create(name) {
  hookly.on(name, channel_callback(name))
  if(!($('#channel' + name).length))
    $('#channels').append('<div id="channel' + name + '"></div>');
  hookly.notify('#channels', { id: 1337, name: name })
}

hookly.start("T8xqNNb1yRpUhSJvNEizsBVpDrfT-UyEYD3ENafogfmznG")
channel_create('#updates')
hookly.on('#channels', function(data) { create_channel(data.name) })
</script>
</body>
</html>